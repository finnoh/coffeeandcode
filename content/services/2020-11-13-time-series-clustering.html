---
title: Life Expectancy - Time Series Clustering
author: Finn
date: '2020-11-13'
slug: time-series-clustering
categories:
  - R
tags:
  - clustering
  - modelling
  - economics
  - advanced
image: images/diff_nat.jpg
image_credit:
code_lang: "R"
description: "How has the life expectancy developed over different countries?"
weight: 200
featured: yes
bibliography: ts_clustering.bib
nocite: '@*'
---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<p><img src="/images/diff_nat.jpg"></p>
<p>Image by <a href="https://pixabay.com/users/alexas_fotos-686414/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=5106668">Alexas_Fotos</a> from <a href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=5106668">Pixabay</a></p>
<div id="life-expectancy-in-different-countries" class="section level1">
<h1>Life Expectancy in different countries</h1>
<p>In this article, we want to take a look at time-series clustering. Great time-series data can be acquired with the <a href="https://data.worldbank.org/"><em>WorldBank-API</em></a>. For starters, we will query the life-expectancy for men and women from all available countries.</p>
<p>In a next step, we calculate the average life-expectancy as: <span class="math display">\[LE_{avg} = \frac{LE_{men} + LE_{women}}{2} \]</span>. Note that this does not take different populations of men and women into account, they are weighted equally.</p>
<table class=" lightable-material lightable-hover" style='font-family: "Source Sans Pro", helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<caption>
(#tab:tab_country)Overview of the countries in cluster 4.
</caption>
<thead>
<tr>
<th style="text-align:center;">
country
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Andorra
</td>
</tr>
<tr>
<td style="text-align:center;">
American Samoa
</td>
</tr>
<tr>
<td style="text-align:center;">
Bermuda
</td>
</tr>
<tr>
<td style="text-align:center;">
Curacao
</td>
</tr>
<tr>
<td style="text-align:center;">
Dominica
</td>
</tr>
<tr>
<td style="text-align:center;">
Faroe Islands
</td>
</tr>
<tr>
<td style="text-align:center;">
Gibraltar
</td>
</tr>
<tr>
<td style="text-align:center;">
Greenland
</td>
</tr>
<tr>
<td style="text-align:center;">
Isle of Man
</td>
</tr>
<tr>
<td style="text-align:center;">
St. Kitts and Nevis
</td>
</tr>
<tr>
<td style="text-align:center;">
Cayman Islands
</td>
</tr>
<tr>
<td style="text-align:center;">
Liechtenstein
</td>
</tr>
<tr>
<td style="text-align:center;">
Monaco
</td>
</tr>
<tr>
<td style="text-align:center;">
St. Martin (French part)
</td>
</tr>
<tr>
<td style="text-align:center;">
Marshall Islands
</td>
</tr>
<tr>
<td style="text-align:center;">
Northern Mariana Islands
</td>
</tr>
<tr>
<td style="text-align:center;">
Nauru
</td>
</tr>
<tr>
<td style="text-align:center;">
West Bank and Gaza
</td>
</tr>
<tr>
<td style="text-align:center;">
Palau
</td>
</tr>
<tr>
<td style="text-align:center;">
Serbia
</td>
</tr>
<tr>
<td style="text-align:center;">
Seychelles
</td>
</tr>
<tr>
<td style="text-align:center;">
San Marino
</td>
</tr>
<tr>
<td style="text-align:center;">
Sint Maarten (Dutch part)
</td>
</tr>
<tr>
<td style="text-align:center;">
Turks and Caicos Islands
</td>
</tr>
<tr>
<td style="text-align:center;">
Tuvalu
</td>
</tr>
<tr>
<td style="text-align:center;">
British Virgin Islands
</td>
</tr>
<tr>
<td style="text-align:center;">
Kosovo
</td>
</tr>
<tr>
<td style="text-align:center;">
Not classified
</td>
</tr>
</tbody>
</table>
<div id="clustering" class="section level2">
<h2>Clustering</h2>
<p>To cluster the time-series we use the spectral clustering. One nice property of this algorithm is, that even though we are dealing with unsupervised machine learning, we get a recommendation for the “optimal” number of clusters (in this case 11). However, we chose to experiment with 4 clusters, because it is easier to interpret.</p>
<p>In the following, we aggregated the life expectancy on the four clusters we have established. The plot below shows the four time-series. Interestingly, three of those are only parallel shifts of one another. We interpreted them as “developed”, “developing” and “least developed” countries. The fourth time-series appears to be something special, as it does not look similar to the other three series: For nearly the first half of the time frame it is close to zero, which is hard to make sense of at first.</p>
<p>To better understand these clusters, create a world-map, where we color the countries with respect to their assigned clusters.</p>
<p><img src="/services/2020-11-13-time-series-clustering_files/figure-html/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Let’s take a look at the countries contained in the clusters with the world map below and compare it to the UN’s classifications of a countries development. Surprisingly, the overlap appears to be quite big. Especially the countries marked as “developed” are nearly identical in both plots.</p>
<p>However, there are some differences with the “less developed countries”, especially in Africa, where some countries in central Africa have been classified as “more developed” by the UN.</p>
<p>One oddity of the clustering is, that Greenland has been assigned its own cluster. This also explains the “strange” curve in the plot above, that probably came into existence due to Greenlands small population (ca. <span class="math inline">\(60000\)</span> people).</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-12"></span>
<img src="/services/2020-11-13-time-series-clustering_files/figure-html/unnamed-chunk-12-1.png" alt="[Based on this image.](https://en.wikipedia.org/wiki/File:Imf-advanced-un-least-developed-2008.svg)" width="100%" />
<p class="caption">
Figure 1: <a href="https://en.wikipedia.org/wiki/File:Imf-advanced-un-least-developed-2008.svg">Based on this image.</a>
</p>
</div>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-wdi">
<p>Bank, The World. n.d. “WDI - Home.” <a href="https://datatopics.worldbank.org/world-development-indicators/">https://datatopics.worldbank.org/world-development-indicators/</a>.</p>
</div>
<div id="ref-spectral">
<p>Denver, CU. 2018. “Spectral Clustering - Cu Denver Optimization Student Wiki.” <a href="http://math.ucdenver.edu/~sborgwardt/wiki/index.php/Spectral_clustering">http://math.ucdenver.edu/~sborgwardt/wiki/index.php/Spectral_clustering</a>.</p>
</div>
</div>
</div>
